##############################################################################
NoneBot2 商店插件速测工具
##############################################################################
******************************************************************************
前言
******************************************************************************
* 一次性对 NoneBot2 商店的所有插件进行速测，以确保商店插件的可靠性
   | 基于 ``poetry`` 与 ``git`` 并通过虚拟环境实现的速测工具。

| 速测工具需要运行环境下可以通过终端或命令行调用 ``poetry`` 以及 ``git`` 命令。

******************************************************************************
判定方式
******************************************************************************
* 现阶段，速测工具根据插件声明的依赖生成各自的虚拟环境，并在其中尝试导入插件本身
   | 对于无法运行在所声明依赖版本范围的插件，将无法通过这个测试。

| 对于更复杂的测试场景，速测工具仍在优化中。

******************************************************************************
开始使用
******************************************************************************
| 在此之前你需要完成 ``poetry`` 的安装，并且需要能从命令行正常调用。

* 在 Windows 平台，你需要确保使用 ``utf-8`` 编码来启动脚本，比如通过命令行环境变量

   很重要

.. code:: cmd

 set pythonutf8=1

* 在 `__main__.py <nonebot2_store_test/__main__.py>`_ 中修改 ``COMMIT`` 常量，工具将对截至该提交的所有插件进行速测

.. code:: python

 COMMIT = "10733e7"

* 将 ``nonebot2_store_test`` 作为工作路径，然后启动脚本

.. code:: cmd

 cd nonebot2_store_test
 python .

* 测试过程会将日志同步输出，全部完成时会输出统计

******************************************************************************
常见问题
******************************************************************************
* PyPI 与 Git 结果怎么看
   | 速测工具同时对商店插件的 PyPI 来源和 Git 来源进行测试。
  * PyPI 来源的结果，对于使用 `nb-cli <https://github.com/nonebot/nb-cli>`_ 添加插件的用户更有参考意义
     | 它明确了该 PyPI 来源的插件通过 `nb-cli <https://github.com/nonebot/nb-cli>`_ 或任一种方式添加后，理论是否可以直接运行在其所声明依赖版本范围的环境中。
  * Git 来源的结果，对于寻求源码示例的，拥有自主项目的开发者更有参考意义
     | 它明确了该 Git 来源的插件或仓库是否可以直接以 ``submodule`` 或 ``clone`` 的形式被加入到项目，且运行在其所声明依赖版本范围的环境中。
   | 用户可以获悉相关插件 PyPI 来源与 Git 来源的差异，以便更好地了解插件的兼容性和维护状态。

* 基于上述判定方式，用户可能仍然会遇到报告中 `Passed` 部分插件在导入时报错的情况
   | 这是由于所安装的其他插件对于 `nonebot2` 或插件自身依赖版本范围的约束不足所致。
   | 用户应向所述其他插件的开发者寻求帮助，商店侧可能对开发者进行插件下架处罚。

******************************************************************************
优化建议
******************************************************************************
| 请积极提交 Issues 或 Pull requests
